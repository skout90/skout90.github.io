
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="지쳐가는 5분에 인생을 거는 나">
    <title>Javascript 클로저(Closure) - 지쳐가는 5분에 인생을 거는 나</title>
    <meta name="author" content="Junho Nam">
    
    
        <link rel="icon" href="https://skout90.github.io/assets/images/favicon.jpg">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/feed.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Junho Nam","sameAs":["https://github.com/skout90","https://stackoverflow.com/users/5809394"],"image":"favicon.jpg"},"articleBody":"내부함수가 외부함수의 맥락(지역변수)에 접근할 수 있는 것을 가리킨다.\n1234567function outterFunc() &#123;  // 외부함수  var title = 'lalala';  function innerFunc() &#123; // 내부함수    alert(title);  &#125;  innerFunc();&#125;\n\n어떠한 함수가 있는데, 그 함수 안에서만 사용되는 함수가 있다. 이것을 내부함수로 선언한다면 , 가독성을 높이고 오류 가능성을 줄일 수 있다.\n그리고 이때, 내부함수에서 외부의 함수의 지역변수에 접근 할 수 있는데 이것을 클로저(Closure)라고 한다.\n\n외부함수가 더 이상 사용되지 않는 경우에도, 내부함수가 외부함수의 지역변수에 접근할 수 있다.\n\n123456789function outterFunc() &#123; // 외부함수  var title ='외부함수의 지역변수';  return function() &#123;   // 내부함수    console.log(title);  &#125;&#125;var innerFunc = outterFunc();innerFunc(); // 외부함수의 지역변수\n\n내부 함수를 리턴함으로서, 외부함수가 사라졌음에도 불구하고, 외부함수의 지역변수에 접근이 가능하다.\n\n아래 코드를 보자.\n\n123456789var arr = [];for (var i = 0; i &lt; 5; i++) &#123;  arr[i] = function() &#123;    return i;  &#125;&#125;for (var index of arr) &#123;  console.log(arr[index]()); // 5 5 5 5 5&#125;\n\n만약 결과를, 0 1 2 3 4 가 나오도록 바꾸고 싶다면. 클로저를 사용해야 한다.\n1234567891011var arr = [];for (var i = 0; i &lt; 5; i++) &#123;  arr[i] = function(id) &#123; // 외부 함수를 익명함수로 선언후 인자를 넘겨 바로 실행    return function() &#123;   // 내부 함수를 리턴      return id;     &#125;  &#125; (i);&#125;for (var index of arr) &#123;  console.log(arr[index]()); // 0 1 2 3 4&#125;\n\narr[0]의 외부함수의 지역변수는 실행당시 맥락(i=0)을 유지하고 있는다.\n클로저의 구조클로저로, 외부 함수의 스코프 변수에 접근 가능한 이유는, 내부 함수의 스코프 체인에 외부함수의 스코프가 포함되기 때문이다.\n12345678910function cCompFunc(pName) &#123;       return function (o1, o2) &#123;        var v1 = o1[pName];      \tvar v2 = o2[pName];      \treturn v1 - v2;    &#125;&#125;var compare = cCompFunc('name');var result = compare(&#123;name:'Junho'&#125;, &#123;name: 'JJong'&#125;);\n\n\n\ncCompFunc(외부함수)가 실행을 마치고 익명함수를 반환\n익명함수의 스코프 체인에는 외부함수의 활성화 객체, 전역함수가 포함\n익명함수는 외부함수의 변수 전체에 접근\n\n\n익명함수의 스코프 체인에서 외부함수를 참조하고 있기 때문에, 외부함수의 활성화 객체는 가비지 컬렉션의 대상이 되지 않는다.\n\n내부 함수는 외부함수 변수에 저장된 마지막 값만 알 수 있음.12345678910111213141516171819function createFunc() &#123;  var result = [];  for(var i = 0; i&lt;10; i++) &#123;      result[i] = function() &#123;          return i;      &#125;  &#125;  return result;&#125;var a = createFunc();a[0](); // a[0](); // 10a[1](); // 10\n\n\n모든 함수가 10을 반환, 모든 함수가 createFunc()의 활성화 객체의 같은 변수 i를 참조한다.\n\n\n수정 버젼\n\n123456789101112131415function createFunc() &#123;    var result = [];    for(var i = 0; i&lt;10; i++) &#123;        result[i] = function(num) &#123;              return function() &#123;                  return num;               &#125;;        &#125;(i);    &#125;  \treturn result;&#125;var a = createFunc();a[0](); // 0a[1](); // 1\n\nfunction 함수를 한번 더 감싸고, 실행시킴으로써, num에는 i자체가 아니라 값이 복사되어 들어오게 된다. 내부함수에는 복사된 제각기 다른 num을 가지게 되어 의도한대로 값을 출력할 수 있다.\n클로저의 this 객체this객체는 런타임에서 함수가 실행 중인 컨텍스트 객체를 가리킨다.\n123456789var name = \"Window\";var obj = &#123; name: \"Obj\",          \tgetNameFunc: function() &#123;            \treturn function() &#123;                    return this.name;                &#125;                &#125;          &#125;;alert(obj.getNameFunc()); // Window\n\n익명함수는 외부 함수의 this**객체를 직접**적으로 접근할 수 없다.\n\n수정 버젼\n\n1234567891011var name = \"Window\";var obj = &#123; name: \"Obj\",          \tgetNameFunc: function() &#123;              \tvar that = this;            \treturn function() &#123;                    return that.name;                &#125;                &#125;          &#125;;alert(obj.getNameFunc()); // Obj\n\nthat은 고유 변수이므로 클로저가 접근할 수 있다.\n\n조금 특이한 패턴\n\n12(obj.getName)(); // Obj(obj.getName = obj.getName)(); // Window\n\nobj.getName에 할당한 값은 함수 자체이므로 this 값은 유지되지 않는다.\n클로저는 어디서 사용되는가?\n클로저로 블록스코프 흉내내기\n\n123(function() &#123;\t// 코드&#125;)();\n\nfunction(){} 을 괄호로 감싸서 함수 표현식을 알리고 바로 실행한다.(안쓰면 에러가 난다)\n12345678function outputNumbers(count) &#123;    (function() &#123;        for(var i=0; i&lt;count; i++) &#123;            alert(i);        &#125;    &#125;)();  \talert(i); // 에러&#125;\n\n위와 같은 패턴은 모듈화나, 공동작업시에 namespace로서 변수가 중복사용되지 않게끔 하는 용도로 많이 사용된다. 해당 스코프가 끝나면 메모리도 회수되기 때문에 메모리 효율도 좋다.\n\nprivate variable\n\n12345678910111213141516171819202122function myHome(thing) &#123;    // 외부함수  return &#123; // 객체 리턴    getThing : function() &#123; // 내부함수      return thing; // 외부함수의 지역변수를 사용할 수 있다.    &#125;,    setThing : function(_thing) &#123;      if(typeof _thing === 'String') &#123;        thing = _thing;      &#125; else &#123;        console.log('물건은 문자열이어야 합니다.');      &#125;    &#125;  &#125;&#125;var notebook = myHome('Gram'); // notebook에 객체를 담음.var tv = myHome('iptv');console.log(notebook.getThing()); // Gramconsole.log(tv.getThing()); // iptvnotebook.setThing('mac');console.log(notebook.getThing()); // mac\n\nnotebook과 tv는 똑같은 객체(myHome의 리턴값)를 담고 있지만, 각 메서드들이 접근할 수 있는 thing(외부함수의 지역변수)의 값은 다름.\ngetThing/setThing은 public이지만, 내부적으로 사용하고 있는 thing은 외부함수의 지역변수로 이미 사라졌기 때문에 내부함수를 통해서만 접근할 수 있는 변수가 된다.\nReferencehttps://www.inflearn.com/course/%EC%A7%80%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%96%B8%EC%96%B4-%EA%B8%B0%EB%B3%B8/%EB%82%B4%EB%B6%80%ED%95%A8%EC%88%98-%EC%99%B8%EB%B6%80%ED%95%A8%EC%88%98/\n","dateCreated":"2017-08-13T01:00:00+09:00","dateModified":"2019-12-17T10:14:27+09:00","datePublished":"2017-08-13T01:00:00+09:00","description":"","headline":"Javascript 클로저(Closure)","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"},"publisher":{"@type":"Organization","name":"Junho Nam","sameAs":["https://github.com/skout90","https://stackoverflow.com/users/5809394"],"image":"favicon.jpg","logo":{"@type":"ImageObject","url":"favicon.jpg"}},"url":"https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"}</script>
    <meta name="description" content="내부함수가 외부함수의 맥락(지역변수)에 접근할 수 있는 것을 가리킨다. 1234567function outterFunc() &amp;#123;  // 외부함수  var title = &apos;lalala&apos;;  function innerFunc() &amp;#123; // 내부함수    alert(title);  &amp;#125;  innerFunc();&amp;#125;  어떠한 함수가 있">
<meta property="og:type" content="blog">
<meta property="og:title" content="Javascript 클로저(Closure)">
<meta property="og:url" content="https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/index.html">
<meta property="og:site_name" content="지쳐가는 5분에 인생을 거는 나">
<meta property="og:description" content="내부함수가 외부함수의 맥락(지역변수)에 접근할 수 있는 것을 가리킨다. 1234567function outterFunc() &amp;#123;  // 외부함수  var title = &apos;lalala&apos;;  function innerFunc() &amp;#123; // 내부함수    alert(title);  &amp;#125;  innerFunc();&amp;#125;  어떠한 함수가 있">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.imgur.com/tBVLpkB.png">
<meta property="og:updated_time" content="2019-12-17T01:14:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javascript 클로저(Closure)">
<meta name="twitter:description" content="내부함수가 외부함수의 맥락(지역변수)에 접근할 수 있는 것을 가리킨다. 1234567function outterFunc() &amp;#123;  // 외부함수  var title = &apos;lalala&apos;;  function innerFunc() &amp;#123; // 내부함수    alert(title);  &amp;#125;  innerFunc();&amp;#125;  어떠한 함수가 있">
<meta name="twitter:image" content="https://i.imgur.com/tBVLpkB.png">
    
    
        
    
    
        <meta property="og:image" content="https://skout90.github.io/assets/images/favicon.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-sbr8a29vhg2buwqdfiagp9i2fk4rxgm5ip8dz0ru5ozzkfexnn3svxyxd4eg.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-102438751-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-102438751-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            지쳐가는 5분에 인생을 거는 나
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Junho Nam</h4>
                
                    <h5 class="sidebar-profile-bio"><p>enjoy while living</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/skout90" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://stackoverflow.com/users/5809394" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Javascript 클로저(Closure)
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2017-08-13T01:00:00+09:00">
	
		    2017.08.13
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Javascript/">Javascript</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>내부함수가 외부함수의 맥락(지역변수)에 접근할 수 있는 것을 가리킨다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outterFunc</span>(<span class="params"></span>) </span>&#123;  <span class="comment">// 외부함수</span></span><br><span class="line">  <span class="keyword">var</span> title = <span class="string">'lalala'</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">innerFunc</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 내부함수</span></span><br><span class="line">    alert(title);</span><br><span class="line">  &#125;</span><br><span class="line">  innerFunc();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>어떠한 함수가 있는데, 그 함수 안에서만 사용되는 함수가 있다. 이것을 내부함수로 선언한다면 , 가독성을 높이고 오류 가능성을 줄일 수 있다.</p>
<p>그리고 이때, <strong>내부함수에서 외부의 함수의 지역변수에 접근 할 수 있는데 이것을 클로저(Closure)</strong>라고 한다.</p>
<ul>
<li><strong>외부함수가 더 이상 사용되지 않는 경우에도, 내부함수가 외부함수의 지역변수에 접근할 수 있다.</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outterFunc</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 외부함수</span></span><br><span class="line">  <span class="keyword">var</span> title =<span class="string">'외부함수의 지역변수'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   <span class="comment">// 내부함수</span></span><br><span class="line">    <span class="built_in">console</span>.log(title);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> innerFunc = outterFunc();</span><br><span class="line">innerFunc(); <span class="comment">// 외부함수의 지역변수</span></span><br></pre></td></tr></table></figure>

<p>내부 함수를 리턴함으로서, 외부함수가 사라졌음에도 불구하고, 외부함수의 지역변수에 접근이 가능하다.</p>
<blockquote>
<p>아래 코드를 보자.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[index]()); <span class="comment">// 5 5 5 5 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>만약 결과를, 0 1 2 3 4 가 나오도록 바꾸고 싶다면. 클로저를 사용해야 한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123; <span class="comment">// 외부 함수를 익명함수로 선언후 인자를 넘겨 바로 실행</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   <span class="comment">// 내부 함수를 리턴</span></span><br><span class="line">      <span class="keyword">return</span> id; </span><br><span class="line">    &#125;</span><br><span class="line">  &#125; (i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[index]()); <span class="comment">// 0 1 2 3 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>arr[0]의 외부함수의 지역변수는 실행당시 맥락(i=0)을 유지하고 있는다.</p>
<h3 id="클로저의-구조"><a href="#클로저의-구조" class="headerlink" title="클로저의 구조"></a>클로저의 구조</h3><p>클로저로, 외부 함수의 스코프 변수에 접근 가능한 이유는, 내부 함수의 스코프 체인에 외부함수의 스코프가 포함되기 때문이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cCompFunc</span>(<span class="params">pName</span>) </span>&#123;   </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">o1, o2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> v1 = o1[pName];</span><br><span class="line">      	<span class="keyword">var</span> v2 = o2[pName];</span><br><span class="line">      	<span class="keyword">return</span> v1 - v2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> compare = cCompFunc(<span class="string">'name'</span>);</span><br><span class="line"><span class="keyword">var</span> result = compare(&#123;<span class="attr">name</span>:<span class="string">'Junho'</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">'JJong'</span>&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/tBVLpkB.png" alt="img"></p>
<ol>
<li>cCompFunc(외부함수)가 실행을 마치고 익명함수를 반환</li>
<li>익명함수의 스코프 체인에는 외부함수의 활성화 객체, 전역함수가 포함</li>
<li>익명함수는 외부함수의 변수 전체에 접근</li>
</ol>
<blockquote>
<p>익명함수의 스코프 체인에서 외부함수를 참조하고 있기 때문에, 외부함수의 활성화 객체는 가비지 컬렉션의 대상이 되지 않는다.</p>
</blockquote>
<h4 id="내부-함수는-외부함수-변수에-저장된-마지막-값만-알-수-있음"><a href="#내부-함수는-외부함수-변수에-저장된-마지막-값만-알-수-있음" class="headerlink" title="내부 함수는 외부함수 변수에 저장된 마지막 값만 알 수 있음."></a>내부 함수는 외부함수 변수에 저장된 마지막 값만 알 수 있음.</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">      result[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> i;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = createFunc();</span><br><span class="line">a[<span class="number">0</span>](); <span class="comment">// </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>](); <span class="comment">// 10</span></span><br><span class="line">a[<span class="number">1</span>](); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<ul>
<li>모든 함수가 10을 반환, 모든 함수가 createFunc()의 활성화 객체의 같은 변수 i를 참조한다.</li>
</ul>
<blockquote>
<p>수정 버젼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">        result[i] = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> num; </span><br><span class="line">              &#125;;</span><br><span class="line">        &#125;(i);</span><br><span class="line">    &#125;</span><br><span class="line">  	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = createFunc();</span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>](); <span class="comment">// 0</span></span><br><span class="line">a[<span class="number">1</span>](); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>function 함수를 한번 더 감싸고, 실행시킴으로써, num에는 i자체가 아니라 값이 복사되어 들어오게 된다. 내부함수에는 복사된 제각기 다른 num을 가지게 되어 의도한대로 값을 출력할 수 있다.</p>
<h4 id="클로저의-this-객체"><a href="#클로저의-this-객체" class="headerlink" title="클로저의 this 객체"></a>클로저의 this 객체</h4><p>this객체는 런타임에서 함수가 실행 중인 컨텍스트 객체를 가리킨다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"Window"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"Obj"</span>,</span><br><span class="line">          	getNameFunc: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">                &#125;    </span><br><span class="line">            &#125;</span><br><span class="line">          &#125;;</span><br><span class="line">alert(obj.getNameFunc()); <span class="comment">// Window</span></span><br></pre></td></tr></table></figure>

<p><strong>익명함수는 외부 함수의 this**</strong>객체를 직접<strong>**적으로 접근할 수 없다.</strong></p>
<ul>
<li>수정 버젼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"Window"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"Obj"</span>,</span><br><span class="line">          	getNameFunc: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              	<span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">            	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> that.name;</span><br><span class="line">                &#125;    </span><br><span class="line">            &#125;</span><br><span class="line">          &#125;;</span><br><span class="line">alert(obj.getNameFunc()); <span class="comment">// Obj</span></span><br></pre></td></tr></table></figure>

<p><code>that</code>은 고유 변수이므로 클로저가 접근할 수 있다.</p>
<ul>
<li>조금 특이한 패턴</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(obj.getName)(); <span class="comment">// Obj</span></span><br><span class="line">(obj.getName = obj.getName)(); <span class="comment">// Window</span></span><br></pre></td></tr></table></figure>

<p>obj.getName에 할당한 값은 함수 자체이므로 this 값은 유지되지 않는다.</p>
<h2 id="클로저는-어디서-사용되는가"><a href="#클로저는-어디서-사용되는가" class="headerlink" title="클로저는 어디서 사용되는가?"></a>클로저는 어디서 사용되는가?</h2><ul>
<li>클로저로 블록스코프 흉내내기</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 코드</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p><code>function(){}</code> 을 괄호로 감싸서 함수 표현식을 알리고 바로 실행한다.(안쓰면 에러가 난다)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outputNumbers</span>(<span class="params">count</span>) </span>&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">            alert(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">  	alert(i); <span class="comment">// 에러</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위와 같은 패턴은 모듈화나, 공동작업시에 namespace로서 변수가 중복사용되지 않게끔 하는 용도로 많이 사용된다. 해당 스코프가 끝나면 메모리도 회수되기 때문에 메모리 효율도 좋다.</p>
<ul>
<li>private variable</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myHome</span>(<span class="params">thing</span>) </span>&#123;    <span class="comment">// 외부함수</span></span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="comment">// 객체 리턴</span></span><br><span class="line">    getThing : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 내부함수</span></span><br><span class="line">      <span class="keyword">return</span> thing; <span class="comment">// 외부함수의 지역변수를 사용할 수 있다.</span></span><br><span class="line">    &#125;,</span><br><span class="line">    setThing : <span class="function"><span class="keyword">function</span>(<span class="params">_thing</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> _thing === <span class="string">'String'</span>) &#123;</span><br><span class="line">        thing = _thing;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'물건은 문자열이어야 합니다.'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> notebook = myHome(<span class="string">'Gram'</span>); <span class="comment">// notebook에 객체를 담음.</span></span><br><span class="line"><span class="keyword">var</span> tv = myHome(<span class="string">'iptv'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(notebook.getThing()); <span class="comment">// Gram</span></span><br><span class="line"><span class="built_in">console</span>.log(tv.getThing()); <span class="comment">// iptv</span></span><br><span class="line"></span><br><span class="line">notebook.setThing(<span class="string">'mac'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(notebook.getThing()); <span class="comment">// mac</span></span><br></pre></td></tr></table></figure>

<p>notebook과 tv는 똑같은 객체(myHome의 리턴값)를 담고 있지만, 각 메서드들이 접근할 수 있는 thing(외부함수의 지역변수)의 값은 다름.</p>
<p>getThing/setThing은 public이지만, 내부적으로 사용하고 있는 thing은 외부함수의 지역변수로 이미 사라졌기 때문에 내부함수를 통해서만 접근할 수 있는 변수가 된다.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.inflearn.com/course/%EC%A7%80%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%96%B8%EC%96%B4-%EA%B8%B0%EB%B3%B8/%EB%82%B4%EB%B6%80%ED%95%A8%EC%88%98-%EC%99%B8%EB%B6%80%ED%95%A8%EC%88%98/" target="_blank" rel="noopener">https://www.inflearn.com/course/%EC%A7%80%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%96%B8%EC%96%B4-%EA%B8%B0%EB%B3%B8/%EB%82%B4%EB%B6%80%ED%95%A8%EC%88%98-%EC%99%B8%EB%B6%80%ED%95%A8%EC%88%98/</a></p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/08/15/Node.js/NodeJs-ORM을-위한-Bookshelf-Knex/"
                    data-tooltip="NodeJs ORM을 위한 Bookshelf, Knex"
                    aria-label="PREVIOUS: NodeJs ORM을 위한 Bookshelf, Knex"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/08/13/Javascript/5.2. Javascript-콜백/"
                    data-tooltip="05.2. Function 콜백, Promise"
                    aria-label="NEXT: 05.2. Function 콜백, Promise"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Junho Nam. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/08/15/Node.js/NodeJs-ORM을-위한-Bookshelf-Knex/"
                    data-tooltip="NodeJs ORM을 위한 Bookshelf, Knex"
                    aria-label="PREVIOUS: NodeJs ORM을 위한 Bookshelf, Knex"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2017/08/13/Javascript/5.2. Javascript-콜백/"
                    data-tooltip="05.2. Function 콜백, Promise"
                    aria-label="NEXT: 05.2. Function 콜백, Promise"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Junho Nam</h4>
        
            <div id="about-card-bio"><p>enjoy while living</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>full stack web developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Seoul, Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-g4mkxjtcee760xuht66pquch3apo7j5mk6ywfkukd4ko1fduhlhzd6iuikso.min.js"></script>
<!--SCRIPTS END-->
<script type="text/javascript">      
  var search_path = "search.xml";
  if (search_path.length == 0) {
    search_path = "search.xml";
  }
  var path = "/" + search_path;
  searchFunc(path, 'local-search-input', 'local-search-result');
</script>

    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://skout90.github.io/2017/08/13/Javascript/javascript-클로저/';
              
            this.page.identifier = '2017/08/13/Javascript/javascript-클로저/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'kindrobot-disqus-com';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
