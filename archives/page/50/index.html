
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="지쳐가는 5분에 인생을 거는 나">
    <title>Archives - 지쳐가는 5분에 인생을 거는 나</title>
    <meta name="author" content="Junho Nam">
    
    
        <link rel="icon" href="https://skout90.github.io/assets/images/favicon.jpg">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/feed.xml">
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="개발 블로그">
<meta property="og:type" content="blog">
<meta property="og:title" content="지쳐가는 5분에 인생을 거는 나">
<meta property="og:url" content="https://skout90.github.io/archives/page/50/index.html">
<meta property="og:site_name" content="지쳐가는 5분에 인생을 거는 나">
<meta property="og:description" content="개발 블로그">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="지쳐가는 5분에 인생을 거는 나">
<meta name="twitter:description" content="개발 블로그">
    
    
        
    
    
        <meta property="og:image" content="https://skout90.github.io/assets/images/favicon.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-sbr8a29vhg2buwqdfiagp9i2fk4rxgm5ip8dz0ru5ozzkfexnn3svxyxd4eg.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-102438751-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-102438751-1');
    </script>


    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            지쳐가는 5분에 인생을 거는 나
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Junho Nam</h4>
                
                    <h5 class="sidebar-profile-bio"><p>enjoy while living</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/skout90" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://stackoverflow.com/users/5809394" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2017/10/22/Javascript/8.상속/"
                            aria-label=": 08. Prototype과 상속"
                        >
                            08. Prototype과 상속
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-10-22T19:28:10+09:00">
	
		    2017.10.22
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Javascript/">Javascript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h3 id="Prototype-이란"><a href="#Prototype-이란" class="headerlink" title="Prototype 이란"></a>Prototype 이란</h3><p>해당 객체의 인스턴스가 가져야할 프로퍼티/메서드를 <strong>모든 인스턴스 전체에서 공유</strong>하는 것.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype.name = <span class="string">"Hi"</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</span><br><span class="line">p1.sayName();</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</span><br><span class="line">p2.sayName();</span><br><span class="line"><span class="built_in">console</span>.log(p1.sayName == p2.sayName); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="Prototype은-어떻게-동작하는가"><a href="#Prototype은-어떻게-동작하는가" class="headerlink" title="Prototype은 어떻게 동작하는가?"></a>Prototype은 어떻게 동작하는가?</h3><p><strong>함수 생성시</strong></p>
<ol>
<li>함수 생성시마다 Prototype property 생성</li>
<li>자동으로 constructor 프로퍼티 가짐</li>
<li>각종 프로퍼티와 메서드가 프로토 타입에 추가된다.</li>
</ol>
<blockquote>
<p>constructor에는 해당 프로토타입을 생성한 생성자가 들어있다.</p>
</blockquote>
<p><strong>인스턴스 생성시</strong></p>
<p>생성자의 프로토타입을 가리키는 포인터 생성(<em>\</em>proto__)</p>
<blockquote>
<p><em>\</em>proto__ 는 프로토타입이 들어있고, 생성자 자체를 찾아가려면 프로토타입의 constructor를 조회하면 된다.</p>
</blockquote>
<p><img src="https://i.imgur.com/wltMdzk.png" alt="img"></p>
<p><strong>프로토타입의 변수 검색</strong></p>
<ol>
<li>해당 인스턴스 내의 변수를 검색한다.</li>
<li>없으면 <em>\</em>proto__를 통해 프로토타입 내의 변수를 검색한다.</li>
</ol>
<p><strong>프로토타입의 프로퍼티들은 공유 된다.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype.name = <span class="string">"Hi"</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</span><br><span class="line">p1.name <span class="comment">// Hi</span></span><br><span class="line">p2.name <span class="comment">// Hi</span></span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">"kk"</span>;</span><br><span class="line">p1.name <span class="comment">// kk</span></span><br><span class="line"></span><br><span class="line">p1.name = <span class="string">'lala'</span>; <span class="comment">// 공유가 끊긴다.</span></span><br></pre></td></tr></table></figure>

<p>프로토타입을 수정하면, 인스턴스의 변수들 또한 수정되는 것을 확인할 수 있다.</p>
<p><strong>객체 인스턴스에서는 프로토타입 수정 불가</strong></p>
<p>p1.name을 바꿔도 prototype은 수정되지 않는다. p1.name은 프로토타입과 연결이 되어있었지만, 새로운 값을 할당하면서 이제 둘 사이의 연결이 끊긴다. 이 연결은 <code>p1.name = null;</code>으로 해도 다시 돌아오지 않는다. <code>delete p1.name;</code>을 해야 다시 접근이 가능하다.</p>
<h3 id="Prototype의-객체-literal-선언"><a href="#Prototype의-객체-literal-선언" class="headerlink" title="Prototype의 객체 literal 선언"></a>Prototype의 객체 literal 선언</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    name: <span class="string">"junho"</span>,</span><br><span class="line">  	sayName : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> Person();</span><br><span class="line">friend.consturctor == Person <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>위와 같이 프로토타입을 초기화할 수도 있다.</p>
<blockquote>
<p>그러나, constructor값이 Object가 되어 버린다. Person으로 되야하는데..</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">  	<span class="keyword">constructor</span> : Person</span><br><span class="line">    name: "junho",</span><br><span class="line">  	sayName : function() &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 그러나 이러면 constructor의 [[Enumerable]] 속성이 true로 지정됌</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// defineProperty를 활용하자.</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(Person.prototype, <span class="string">"constructor"</span>, &#123; <span class="attr">enumerable</span>: <span class="literal">false</span>, <span class="attr">value</span>: Person &#125;);</span><br></pre></td></tr></table></figure>

<p>그리고 위에서 설명했듯이 인스턴스와 프로토타입은 공유되고 있어, 프로토타입이 바뀌면 즉시 인스턴스에도 반영이 되지만.</p>
<p><strong>리터럴을 사용하면, 이전 인스턴스들과의 공유가 끊어진다!</strong></p>
<p><code>Person.prototype = { ... }</code> 을 통해서 프로토타입을 덮어 쒸우면, 새로운 prototype이 생성되서 이전에 생성한 인스턴스와의 공유가 끊어진다.</p>
<blockquote>
<p>하지만, 프로토타입을 사용하면 프로퍼티들이 무조건 공유되는데 공유하기 싫을 때는 어떻게 해야하나? 생성자 패턴과 합쳐버리면 된다.</p>
</blockquote>
<h3 id="생성자-패턴-프로토타입패턴"><a href="#생성자-패턴-프로토타입패턴" class="headerlink" title="생성자 패턴 + 프로토타입패턴"></a>생성자 패턴 + 프로토타입패턴</h3><ol>
<li>생성자 패턴으로 비공유 인스턴스 프로퍼티를 만든다.</li>
<li>프로토타입으로 메서드 + 공유프로퍼티 정의한다.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  	<span class="keyword">this</span>.friends = [<span class="string">"Sunhak"</span>, <span class="string">"Jiwon"</span>, <span class="string">"JungHyun"</span>];</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span> : Person,</span><br><span class="line">  	sayName : function() &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"junho"</span>);</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"sunhak"</span>);</span><br><span class="line"><span class="comment">// name과 friends는 공유되지 않는다.</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>그런데 좀 귀찮다… 모든 정보를 생성자 내부에서 초기화해뻐릴 수 없을까?</p>
</blockquote>
<h3 id="종속적-프로토타입-패턴"><a href="#종속적-프로토타입-패턴" class="headerlink" title="종속적 프로토타입 패턴"></a>종속적 프로토타입 패턴</h3><p>모든 정보를 생성자 내부에서 초기화해보자!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.friends = [<span class="string">"Sunhak"</span>, <span class="string">"Jiwon"</span>, <span class="string">"JungHyun"</span>];</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span>.sayName != <span class="string">"function"</span>) &#123;</span><br><span class="line">        Person.prototype.sayName : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Person.prototype.sayName</code> 은 생성자가 첫번째로 호출된 다음에만 실행된다. if문을 프로퍼티마다 만들 필요 없이 한 if문에 모든 prototype 초기화를 해주면 된다.</p>
<h3 id="방탄-생성자-패턴"><a href="#방탄-생성자-패턴" class="headerlink" title="방탄 생성자 패턴"></a>방탄 생성자 패턴</h3><p>this, new 사용금지 환경에서 사용, private의 get/set함수와 비슷하다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  	o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(name) &#125;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> friend = Person(<span class="string">"hi"</span>);</span><br><span class="line">friend.sayName(); <span class="comment">// hi</span></span><br></pre></td></tr></table></figure>

<h2 id="상속"><a href="#상속" class="headerlink" title="상속"></a>상속</h2><p>본격적으로 prototype을 이용하여 상속을 받아보자</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.property = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.property;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.subproperty = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.subproperty;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType();</span><br><span class="line">alert(instance.getSuperValue());</span><br><span class="line"></span><br><span class="line">instance <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br><span class="line">instance <span class="keyword">instanceof</span> SuperType <span class="comment">// true</span></span><br><span class="line">instance <span class="keyword">instanceof</span> SubType <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.isPrototypeOf(instance); <span class="comment">// true</span></span><br><span class="line">SuperType.prototype.isPrototypeOf(instance); <span class="comment">// true</span></span><br><span class="line">SubType.prototype.isPrototypeOf(instance); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/Ai1TpCx.png" alt="img"></p>
<p><strong>변수 검색</strong></p>
<p>위에서 말한것처럼 property 검색시 인스턴스 -&gt; SubType -&gt; SuperType 순서대로 프로퍼티를 검색해 나간다. 상위 프로토타입으로 올라갈때는 프로토타입체인 <code>__proto__</code> 를 이용한다.</p>
<blockquote>
<p>다시 또 문제점이 있다. 상속받으면 공유된다. 위의 프로토타입 패턴에서 처럼, 공유하고 싶지 않은 변수들을 어떻게 처리해야할지 생각해봐야 한다.</p>
</blockquote>
<h3 id="생성자-훔치기"><a href="#생성자-훔치기" class="headerlink" title="생성자 훔치기"></a>생성자 훔치기</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>];</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   SuperType.call(<span class="keyword">this</span>, <span class="string">"junho"</span>); <span class="comment">// 이 코드가 핵심!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType();</span><br><span class="line">instance.colors.push(<span class="string">"black"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance.colors); <span class="comment">// red blue black</span></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType();</span><br><span class="line">instance2.colors.push(<span class="string">"green"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance.colors); <span class="comment">// red blue green</span></span><br></pre></td></tr></table></figure>

<p>SuperType 생성자를 새로 생성한 SubType 인스턴스 컨텍스트에서 호출하기 때문에 자신만의 colors 프로퍼티를 갖게 된다.</p>
<blockquote>
<p>문제는… 공유해도 되는 함수의 경우 다시 새롭게 생성이 돼서 메모리 낭비가 생긴다는 거다. 공유할 프로퍼티와 그렇지 않을 프로퍼티를 구별할 수 있을까?</p>
</blockquote>
<h3 id="조합-상속"><a href="#조합-상속" class="headerlink" title="조합 상속"></a>조합 상속</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>];</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name); <span class="comment">// 공유하고 싶지 않은 코드</span></span><br><span class="line">  	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 공유할 함수</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType(<span class="string">"Junho"</span>, <span class="number">28</span>);</span><br><span class="line">alert(instance.getSuperValue());</span><br></pre></td></tr></table></figure>

<p>자신만의 고유 프로퍼티와 메서드를 공유할 수 있다.</p>
<blockquote>
<p>근데 상속을 위한 생성자 함수를 좀 심플하게 만들 수는 없을까?</p>
</blockquote>
<h3 id="프로토타입-상속"><a href="#프로토타입-상속" class="headerlink" title="프로토타입 상속"></a>프로토타입 상속</h3><p>생성자 함수를 쓰지 않고 상속을 구현해보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  	F.prototype = o;</span><br><span class="line">  	<span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name : <span class="string">"hi"</span>,</span><br><span class="line">  	friends : [<span class="string">"junho"</span>, <span class="string">"sunhak"</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anotherPerson = object(person);</span><br><span class="line">anotherPerson.name = <span class="string">"hi"</span>;</span><br><span class="line">anotherPerson.friends.push(<span class="string">"bil"</span>); </span><br><span class="line"><span class="keyword">var</span> anotherPerson2 = object(person);</span><br><span class="line">anotherPerson2.name = <span class="string">"ho"</span>;</span><br><span class="line">anotherPerson2.friends.push(<span class="string">"ho"</span>);</span><br><span class="line"></span><br><span class="line">anotherPerson <span class="comment">// ["junho", "sunhak", "bil", "ho"]</span></span><br><span class="line">anotherPerson2 <span class="comment">// ["junho", "sunhak", "bil", "ho"]</span></span><br></pre></td></tr></table></figure>

<p>object 함수에서 자체적으로 생성자 함수를 만들고 prototype에 할당 후 리턴해준다.</p>
<p>ES5에는 위와 같은 패턴을 <code>Object.create</code> 를 통해서 적용할 수 있다.</p>
<blockquote>
<p>Object.create(프로토타입이 될 객체, 추가할 프로퍼티 객체)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123; <span class="attr">name</span>: <span class="string">"hi"</span>, <span class="attr">friends</span> : [<span class="string">"hi"</span>, <span class="string">"ho"</span>] &#125;</span><br><span class="line"><span class="comment">// p1, p2는 person 객체를 공유하게 된다.</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Object</span>.create(person);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Object</span>.create(person);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="built_in">Object</span>.create(person, &#123; <span class="attr">name</span> : &#123; <span class="attr">value</span> : <span class="string">"Gre"</span>&#125; &#125;)</span><br><span class="line"><span class="comment">// 두번째 파라미터는 Object.defineProperties와 유사하다.</span></span><br></pre></td></tr></table></figure>

<h3 id="기생-상속"><a href="#기생-상속" class="headerlink" title="기생 상속"></a>기생 상속</h3><p>객체를 확장해서 반환</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// object 함수 생략</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = object(original);</span><br><span class="line">  clone.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'hi'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">"junho"</span>,</span><br><span class="line">  friends: [<span class="string">"She"</span>, <span class="string">"junho"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anotherPerson = createAnother(person);</span><br><span class="line">anotherPerson.sayHi();</span><br></pre></td></tr></table></figure>

<p>anotherPerson객체는 person의 프로퍼티와 메서드를 상속하며 sayHi() 메서드를 추가로 가진다.</p>
<h4 id="기생-조합-상속"><a href="#기생-조합-상속" class="headerlink" title="기생 조합 상속"></a>기생 조합 상속</h4><p>조합상속은 JS에서 자주 쓰이지만, 비효율 적인 면이 있음(상위 타입 생성자가 항상 두번 호출됌-? 무슨 말이지)</p>
<ol>
<li>하위 타입의 프로토타입을 생성하기 위해</li>
<li>하위 타입 생성자 내부에서.</li>
</ol>
<p>하위 타입의 프로토타입은 상위 타입 객체의 인스턴스 프로퍼티를 모두 상속, 하위 타입 생성자 실행시 모두 덮어씀. 두번 실행 별의미가 없음.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  	<span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.protoype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name); <span class="comment">// SuperType 두번째 호출</span></span><br><span class="line">  	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.protoype = <span class="keyword">new</span> SuperType(); <span class="comment">// 처음 호출</span></span><br><span class="line">SuperType.protoype.consturctor = SubType;</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>name과 colors프로퍼티는 인스턴스에도 존재, SubType 프로토타입에도 존재. 하위타입의 프로토타입을 할당하기 위해 상위 타입의 생성자를 호출할 필요는 없다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> prototype = object(superType.prototype);</span><br><span class="line">  	prototype.constructor = subType;</span><br><span class="line">  	subType.prototype = protoType;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  	<span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.protoype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    SuperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">  	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inheritPrototype(SubType, SuperType);</span><br><span class="line"></span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol>
<li>상위 타입의 프로토타입을 복제</li>
<li>consturctor 프로퍼티를 prototype에 할당하여, 기본 constructor 사라지는 현상 대비</li>
<li>하위타입의 프로토타입에 새로 생성한 객체를 할당</li>
</ol>
<p>SuperType 생성자를 단 한 번만 호출하므로 SubType.prototype에 불필요하고 사용하지 않는 프로퍼티를 만들지 않았다는 점에서 효과적. 포로토타입 체인이 온전히 유지되므로 instanceof와 isPrototypeOf() 메서드로 정상 작동.</p>
<p>가장 효율적인 상속 패러다임으로 평가.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>프론트엔드 개발자를 위한 Javascript - 니콜라스 자카스</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2017/10/22/Javascript/8.상속/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/49/"
                aria-label="NEWER POSTS"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/51/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 50 of 150</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Junho Nam. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/favicon.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Junho Nam</h4>
        
            <div id="about-card-bio"><p>enjoy while living</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>full stack web developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Seoul, Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-g4mkxjtcee760xuht66pquch3apo7j5mk6ywfkukd4ko1fduhlhzd6iuikso.min.js"></script>
<!--SCRIPTS END-->
<script type="text/javascript">      
  var search_path = "search.xml";
  if (search_path.length == 0) {
    search_path = "search.xml";
  }
  var path = "/" + search_path;
  searchFunc(path, 'local-search-input', 'local-search-result');
</script>




    </body>
</html>
